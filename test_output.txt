  console.warn
    [1m[43m[30m
      Puppeteer old Headless deprecation warning:[0m[33m
        In the near future `headless: true` will default to the new Headless mode
        for Chrome instead of the old Headless implementation. For more
        information, please see https://developer.chrome.com/articles/new-headless/.
        Consider opting in early by passing `headless: "new"` to `puppeteer.launch()`
        If you encounter any bugs, please report them to https://github.com/puppeteer/puppeteer/issues/new/choose.[0m

      18 |     }
      19 |
    > 20 |     browser = await puppeteer.launch({
         |                               ^
      21 |         headless: HEADLESS,
      22 |         args: ['--no-sandbox', '--disable-setuid-sandbox'],
      23 |         slowMo: 0 // Add delay for debugging if needed

      at ChromeLauncher.launch (node_modules/puppeteer-core/src/node/ChromeLauncher.ts:45:15)
      at PuppeteerNode.launch (node_modules/puppeteer-core/src/node/PuppeteerNode.ts:173:27)
      at launch (tests/setup.js:20:31)
      at Object.setupBrowser (tests/integration/auth.test.js:18:29)

FAIL tests/integration/auth.test.js (37.418 s)
  ‚óè Authentication Flow Tests ‚Ä∫ User Registration ‚Ä∫ should successfully register a new user

    TargetCloseError: Protocol error (Input.dispatchMouseEvent): Target closed

      at CallbackRegistry.clear (node_modules/puppeteer-core/src/common/CallbackRegistry.ts:93:30)
      at CdpCDPSession._onClosed (node_modules/puppeteer-core/src/cdp/CDPSession.ts:149:21)
      at Connection.#onClose (node_modules/puppeteer-core/src/cdp/Connection.ts:205:15)
      at WebSocket.<anonymous> (node_modules/puppeteer-core/src/node/NodeWebSocketTransport.ts:50:22)
      at callListener (node_modules/puppeteer-core/node_modules/ws/lib/event-target.js:290:14)
      at WebSocket.onClose (node_modules/puppeteer-core/node_modules/ws/lib/event-target.js:220:9)
      at WebSocket.emitClose (node_modules/puppeteer-core/node_modules/ws/lib/websocket.js:265:10)
      at Socket.socketOnClose (node_modules/puppeteer-core/node_modules/ws/lib/websocket.js:1289:15)

    Cause:
    ProtocolError:

      71 | async function fillField(targetPage, selector, value) {
      72 |     await targetPage.waitForSelector(selector);
    > 73 |     await targetPage.click(selector);
         |     ^
      74 |     await targetPage.type(selector, value);
      75 | }
      76 |

      at Callback.<instance_members_initializer> (node_modules/puppeteer-core/src/common/CallbackRegistry.ts:117:12)
      at new Callback (node_modules/puppeteer-core/src/common/CallbackRegistry.ts:122:3)
      at CallbackRegistry.create (node_modules/puppeteer-core/src/common/CallbackRegistry.ts:27:22)
      at Connection._rawSend (node_modules/puppeteer-core/src/cdp/Connection.ts:120:22)
      at CdpCDPSession.send (node_modules/puppeteer-core/src/cdp/CDPSession.ts:95:29)
      at node_modules/puppeteer-core/src/cdp/Input.ts:395:27
      at CdpMouse.#withTransaction (node_modules/puppeteer-core/src/cdp/Input.ts:326:13)
      at CdpMouse.down (node_modules/puppeteer-core/src/cdp/Input.ts:390:32)
      at CdpMouse.click (node_modules/puppeteer-core/src/cdp/Input.ts:449:23)
      at CdpElementHandle.click (node_modules/puppeteer-core/src/api/ElementHandle.ts:754:35)
      at CdpElementHandle.<anonymous> (node_modules/puppeteer-core/src/api/ElementHandle.ts:172:22)
      at CdpFrame.click (node_modules/puppeteer-core/src/api/Frame.ts:1053:5)
      at fillField (tests/setup.js:73:5)
      at Object.<anonymous> (tests/integration/auth.test.js:45:13)

  ‚óè Authentication Flow Tests ‚Ä∫ User Login ‚Ä∫ should successfully login with valid credentials

    Requesting main frame too early!

      44 |     for (let i = 0; i < retries; i++) {
      45 |         try {
    > 46 |             await targetPage.goto(url, { waitUntil: 'networkidle2', timeout: 10000 });
         |                              ^
      47 |             return;
      48 |         } catch (error) {
      49 |             if (i === retries - 1) throw error;

      at assert (node_modules/puppeteer-core/src/util/assert.ts:19:11)
      at FrameManager.mainFrame (node_modules/puppeteer-core/src/cdp/FrameManager.ts:261:11)
      at CdpPage.mainFrame (node_modules/puppeteer-core/src/cdp/Page.ts:479:31)
      at CdpPage.goto (node_modules/puppeteer-core/src/api/Page.ts:1608:23)
      at goto (tests/setup.js:46:30)
      at Object.<anonymous> (tests/integration/auth.test.js:73:13)

  ‚óè Authentication Flow Tests ‚Ä∫ User Login ‚Ä∫ should show error for invalid credentials

    Requesting main frame too early!

      44 |     for (let i = 0; i < retries; i++) {
      45 |         try {
    > 46 |             await targetPage.goto(url, { waitUntil: 'networkidle2', timeout: 10000 });
         |                              ^
      47 |             return;
      48 |         } catch (error) {
      49 |             if (i === retries - 1) throw error;

      at assert (node_modules/puppeteer-core/src/util/assert.ts:19:11)
      at FrameManager.mainFrame (node_modules/puppeteer-core/src/cdp/FrameManager.ts:261:11)
      at CdpPage.mainFrame (node_modules/puppeteer-core/src/cdp/Page.ts:479:31)
      at CdpPage.goto (node_modules/puppeteer-core/src/api/Page.ts:1608:23)
      at goto (tests/setup.js:46:30)
      at Object.<anonymous> (tests/integration/auth.test.js:124:13)

  ‚óè Authentication Flow Tests ‚Ä∫ Session Persistence ‚Ä∫ should maintain session across page navigation

    Requesting main frame too early!

      44 |     for (let i = 0; i < retries; i++) {
      45 |         try {
    > 46 |             await targetPage.goto(url, { waitUntil: 'networkidle2', timeout: 10000 });
         |                              ^
      47 |             return;
      48 |         } catch (error) {
      49 |             if (i === retries - 1) throw error;

      at assert (node_modules/puppeteer-core/src/util/assert.ts:19:11)
      at FrameManager.mainFrame (node_modules/puppeteer-core/src/cdp/FrameManager.ts:261:11)
      at CdpPage.mainFrame (node_modules/puppeteer-core/src/cdp/Page.ts:479:31)
      at CdpPage.goto (node_modules/puppeteer-core/src/api/Page.ts:1608:23)
      at goto (tests/setup.js:46:30)
      at Object.<anonymous> (tests/integration/auth.test.js:150:13)


  ‚óè Test suite failed to run

    thrown: "Exceeded timeout of 30000 ms for a hook.
    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout."

      21 |     });
      22 |
    > 23 |     afterAll(async () => {
         |     ^
      24 |         await closeBrowser();
      25 |     });
      26 |

      at afterAll (tests/integration/auth.test.js:23:5)
      at Object.describe (tests/integration/auth.test.js:14:1)

Test Suites: 1 failed, 1 total
Tests:       4 failed, 4 total
Snapshots:   0 total
Time:        37.539 s, estimated 38 s
Ran all test suites matching /tests\/integration\/auth.test.js/i.
